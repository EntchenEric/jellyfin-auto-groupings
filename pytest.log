============================= test session starts ==============================
platform linux -- Python 3.14.2, pytest-8.0.0, pluggy-1.6.0 -- /usr/bin/python3
cachedir: .pytest_cache
rootdir: /home/entcheneric/Documents/jellyfin-groupings
plugins: mock-3.12.0, flask-1.3.0, cov-4.1.0
collecting ... collected 102 items

tests/test_config.py::test_load_config_defaults PASSED
tests/test_config.py::test_save_and_load_config PASSED
tests/test_config.py::test_config_migration PASSED
tests/test_config.py::test_nested_defaults PASSED
tests/test_external.py::test_fetch_letterboxd_list Found 1 slugs on page 1. Fetching IDs...
  Fetching ID for: the-godfather
    Found ID: tt0068646
PASSED
tests/test_external.py::test_fetch_letterboxd_list_tmdb Found 1 slugs on page 1. Fetching IDs...
  Fetching ID for: film1
    Found ID: 500
Found 1 slugs on page 2. Fetching IDs...
  Fetching ID for: film2
    Found ID: 600
PASSED
tests/test_external.py::test_fetch_letterboxd_invalid_url PASSED
tests/test_external.py::test_fetch_letterboxd_http_error PASSED
tests/test_external.py::test_fetch_mal_list PASSED
tests/test_external.py::test_fetch_mal_pagination PASSED
tests/test_external.py::test_fetch_trakt_list PASSED
tests/test_external.py::test_fetch_anilist_all PASSED
tests/test_external.py::test_fetch_tmdb_invalid_args PASSED
tests/test_external.py::test_fetch_tmdb_url_parsing PASSED
tests/test_external.py::test_fetch_mal_error PASSED
tests/test_external.py::test_fetch_trakt_pagination PASSED
tests/test_external.py::test_fetch_anilist_empty_data PASSED
tests/test_fetchers.py::test_fetch_jellyfin_items PASSED
tests/test_fetchers.py::test_fetch_imdb_list PASSED
tests/test_fetchers.py::test_fetch_tmdb_list PASSED
tests/test_fetchers.py::test_fetch_anilist_list PASSED
tests/test_routes.py::test_get_config PASSED
tests/test_routes.py::test_update_config PASSED
tests/test_routes.py::test_test_server_success PASSED
tests/test_routes.py::test_test_server_failure PASSED
tests/test_routes.py::test_browse_directory PASSED
tests/test_routes.py::test_get_jellyfin_metadata PASSED
tests/test_routes.py::test_api_sync PASSED
tests/test_routes.py::test_upload_cover_security_check PASSED
tests/test_routes.py::test_upload_cover_success PASSED
tests/test_routes.py::test_save_config_route PASSED
tests/test_routes.py::test_auto_detect_paths PASSED
tests/test_routes.py::test_preview_grouping PASSED
tests/test_routes.py::test_preview_all_sync PASSED
tests/test_routes.py::test_index PASSED
tests/test_routes.py::test_browse_security PASSED
tests/test_routes.py::test_update_config_non_dict PASSED
tests/test_routes.py::test_update_config_scheduler_fail PASSED
tests/test_routes.py::test_test_server_unexpected_error PASSED
tests/test_routes.py::test_test_server_invalid_body PASSED
tests/test_routes.py::test_test_server_missing_fields PASSED
tests/test_routes.py::test_test_server_exception PASSED
tests/test_routes.py::test_get_jellyfin_metadata_no_config PASSED
tests/test_routes.py::test_get_jellyfin_metadata_error PASSED
tests/test_routes.py::test_upload_cover_invalid_json PASSED
tests/test_routes.py::test_upload_cover_bad_format PASSED
tests/test_routes.py::test_update_config_error PASSED
tests/test_routes.py::test_preview_grouping_missing_type PASSED
tests/test_routes.py::test_preview_grouping_invalid_type PASSED
tests/test_routes.py::test_preview_grouping_error PASSED
tests/test_routes.py::test_auto_detect_no_media PASSED
tests/test_routes.py::test_browse_directory_oserror PASSED
tests/test_scheduler.py::test_update_scheduler_jobs_clear PASSED
tests/test_scheduler.py::test_update_scheduler_jobs_global PASSED
tests/test_scheduler.py::test_update_scheduler_jobs_groups PASSED
tests/test_scheduler.py::test_run_global_sync_job PASSED
tests/test_scheduler.py::test_run_group_sync_job PASSED
tests/test_scheduler.py::test_start_scheduler PASSED
tests/test_scheduler.py::test_update_scheduler_jobs_error PASSED
tests/test_sync.py::test_translate_path PASSED
tests/test_sync.py::test_parse_complex_query PASSED
tests/test_sync.py::test_match_condition PASSED
tests/test_sync.py::test_sort_items_in_memory PASSED
tests/test_sync.py::test_eval_item PASSED
tests/test_sync.py::test_library_cache PASSED
tests/test_sync.py::test_get_cover_path PASSED
tests/test_sync.py::test_match_jellyfin_items_by_provider Jellyfin library: 2 items fetched for matching
PASSED
tests/test_sync.py::test_preview_group Found 1 potential items for group 'preview'
Jellyfin library: 1 items fetched for matching
PASSED
tests/test_sync.py::test_preview_group_fetch_error PASSED
tests/test_sync.py::test_parse_complex_query_with_prefixes PASSED
tests/test_sync.py::test_eval_item_multiple_or PASSED
tests/test_sync.py::test_match_condition_variants PASSED
tests/test_sync.py::test_match_by_provider_empty_library Jellyfin library: 0 items fetched for matching
PASSED
tests/test_sync.py::test_translate_path_edge_cases PASSED
tests/test_sync.py::test_sort_items_missing_field PASSED
tests/test_sync.py::test_match_jellyfin_items_no_match Jellyfin library: 1 items fetched for matching
PASSED
tests/test_sync.py::test_sort_items_rating PASSED
tests/test_sync.py::test_sort_items_unknown PASSED
tests/test_sync.py::test_sort_items_missing_values_logic PASSED
tests/test_sync_extended.py::test_run_sync_tmdb Starting sync to: /target
Processing group: 'TMDB List' -> /target/TMDB List  (sort_order='tmdb_list_order')
Cleaning existing directory: /target/TMDB List
Failed to copy cover image: [Errno 2] No such file or directory: '/target/.covers/575a93499b0a735838c7072966c2b699.jpg'
TMDb list '123': 1 items found
Jellyfin library: 1 items fetched for matching
Created symlink: /target/TMDB List/0001 - p1 -> /p1
Created 1 symlinks for 'TMDB List'
PASSED
tests/test_sync_extended.py::test_run_sync_anilist Starting sync to: /target
Processing group: 'AniList' -> /target/AniList  (sort_order='anilist_list_order')
Cleaning existing directory: /target/AniList
Failed to copy cover image: [Errno 2] No such file or directory: '/target/.covers/17dbd6b23f453c1437eeaca27c91b119.jpg'
AniList user 'user' (status='completed'): 1 items found
Jellyfin library: 1 items fetched for matching
Created symlink: /target/AniList/0001 - p1 -> /p1
Created 1 symlinks for 'AniList'
PASSED
tests/test_sync_extended.py::test_run_sync_trakt Starting sync to: /target
Processing group: 'Trakt' -> /target/Trakt  (sort_order='trakt_list_order')
Cleaning existing directory: /target/Trakt
Failed to copy cover image: [Errno 2] No such file or directory: '/target/.covers/a5570c8009900fc3ddb40cfdc44d42f4.jpg'
Trakt list 'user/list': 1 IMDb IDs found
Jellyfin library: 1 items fetched for matching
Created symlink: /target/Trakt/0001 - p1 -> /p1
Created 1 symlinks for 'Trakt'
PASSED
tests/test_sync_extended.py::test_run_sync_mal Starting sync to: /target
Processing group: 'MAL' -> /target/MAL  (sort_order='mal_list_order')
Cleaning existing directory: /target/MAL
Failed to copy cover image: [Errno 2] No such file or directory: '/target/.covers/aac477583e3dabc030891d2562352dac.jpg'
MyAnimeList user 'user' (status=None): 1 items found
Jellyfin library: 1 items fetched for matching
Created symlink: /target/MAL/0001 - p1 -> /p1
Created 1 symlinks for 'MAL'
PASSED
tests/test_sync_extended.py::test_run_sync_letterboxd Starting sync to: /target
Processing group: 'LB' -> /target/LB  (sort_order='letterboxd_list_order')
Cleaning existing directory: /target/LB
Failed to copy cover image: [Errno 2] No such file or directory: '/target/.covers/c951270e425b15fc20c64da4341c1d89.jpg'
Letterboxd list 'https://letterboxd.com/user/list/my-list': 1 IDs found
Jellyfin library: 1 items fetched for matching
Created symlink: /target/LB/0001 - p1 -> /p1
Created 1 symlinks for 'LB'
PASSED
tests/test_sync_extended.py::test_run_sync_invalid_group Starting sync to: /target
Skipping invalid group entry: not_a_dict
PASSED
tests/test_sync_extended.py::test_run_sync_complex Starting sync to: /target
Processing group: 'Complex' -> /target/Complex  (sort_order='')
Cleaning existing directory: /target/Complex
Failed to copy cover image: [Errno 2] No such file or directory: '/target/.covers/10b4eb76294b70d7fd6df997ff06edb1.jpg'
Jellyfin library: 1 items fetched for matching
Created symlink: /target/Complex/p1 -> /p1
Created 1 symlinks for 'Complex'
PASSED
tests/test_sync_extended.py::test_run_sync_dry_run Starting sync to: /target
Processing group: 'G1' -> /target/G1  (sort_order='')
Found 1 potential items for group 'G1'
Would create 1 symlinks for 'G1'
PASSED
tests/test_sync_extended.py::test_run_sync_selective Starting sync to: /target
Processing group: 'G1' -> /target/G1  (sort_order='')
Cleaning existing directory: /target/G1
Failed to copy cover image: [Errno 2] No such file or directory: '/target/.covers/c0497521d35d66866e3af408094864c3.jpg'
Found 1 potential items for group 'G1'
Created symlink: /target/G1/p1 -> /p1
Created 1 symlinks for 'G1'
PASSED
tests/test_sync_extended.py::test_run_sync_missing_group Starting sync to: /tmp/pytest-of-entcheneric/pytest-37/test_run_sync_missing_group0/target
PASSED
tests/test_sync_extended.py::test_run_sync_tmdb_error Starting sync to: /target
Processing group: 'G1' -> /target/G1  (sort_order='')
Cleaning existing directory: /target/G1
Failed to copy cover image: [Errno 2] No such file or directory: '/target/.covers/c0497521d35d66866e3af408094864c3.jpg'
Error fetching TMDb list for group 'G1': TMDB Unavailable
PASSED
tests/test_sync_extended.py::test_preview_group_complex_error PASSED
tests/test_sync_extended.py::test_fetch_items_tmdb_no_key No TMDb API Key configured for group 'G'
PASSED
tests/test_sync_extended.py::test_fetch_items_tmdb_empty TMDb list 'val': 0 items found
No items found in TMDb list for group 'G'
PASSED
tests/test_sync_extended.py::test_fetch_items_anilist_error Error fetching AniList items for group 'G': AniList Error
PASSED
tests/test_sync_extended.py::test_fetch_items_mal_no_id No MAL Client ID configured for group 'G'
PASSED
tests/test_sync_extended.py::test_fetch_items_mal_with_status MyAnimeList user 'user' (status='completed'): 1 items found
PASSED
tests/test_sync_extended.py::test_fetch_items_mal_error Error fetching MyAnimeList items for group 'G': MAL Error
PASSED
tests/test_sync_extended.py::test_fetch_items_mal_empty MyAnimeList user 'user' (status=None): 0 items found
No items found for MyAnimeList user 'user'
PASSED
tests/test_sync_extended.py::test_fetch_items_trakt_error Error fetching Trakt list for group 'G': Trakt Fail
PASSED
tests/test_sync_extended.py::test_fetch_items_trakt_empty Trakt list 'val': 0 IMDb IDs found
No items found in Trakt list for group 'G'
PASSED
tests/test_sync_integration.py::test_run_sync_basic Starting sync to: /host/target
Path translation active: /jf -> /host
Processing group: 'Action Movies' -> /host/target/Action Movies  (sort_order='SortName')
Cleaning existing directory: /host/target/Action Movies
Failed to copy cover image: [Errno 2] No such file or directory: '/host/target/.covers/90ce2364e02379b96643fe4d0f2d7c25.jpg'
Found 1 potential items for group 'Action Movies'
Translated path: /jf/movies/Action Film 1/file.mkv -> /host/movies/Action Film 1/file.mkv
Created symlink: /host/target/Action Movies/0001 - file.mkv -> /host/movies/Action Film 1/file.mkv
Created 1 symlinks for 'Action Movies'
PASSED
tests/test_sync_integration.py::test_run_sync_imdb Starting sync to: /host/target
Processing group: 'IMDb List' -> /host/target/IMDb List  (sort_order='imdb_list_order')
Would create 1 symlinks for 'IMDb List'
PASSED

============================= 102 passed in 0.61s ==============================
